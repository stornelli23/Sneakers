<!DOCTYPE html>
<html lang="en">

    <%- include ('partials/head.ejs') %> <body>
  

    <main>
        <%- include ('partials/header') %> 
        <div class="contenedor-gral">
            <div class="contenedor-titular">
                 <h2 class="cart">CARRITO DE COMPRAS</h2>
            </div>
            
            <div class="contenedor-productos">
                <div class="carrito">
                
                <i class="fa-solid fa-cart-shopping"></i>
                </div>
                <div class="cajaPadding">
                 


                    <% if(arrayCarrito.length > 0) { %>



                    <% arrayCarrito.forEach(producto => { %>
                    <article><!--Producto-->
                          <div class="bloqueProducto">
                              <div class="linea">  <!-- linea horizontal-->
                                  <hr>
                              </div>
                              <div class="bloqueSuperiorProducto">
                                  <div class="foto"><!--bloque foto-->
                                      <img class="foto-producto" src="/img/products/<%= producto.image %> " alt="Producto1">
                                  </div>

                                  
                                  <div class="descripcion"><!--bloque descripción-->
                                        <div class="modelo"><p class="cart" > <%=producto.name %></p>
                                        </div>
                    
                                        <div class="talle"><p class="cart" >Talle: </p>
                                        </div>
                                  </div>
                                  <div class="columnaCantidad">
                                      <div class="cantidad" ><!--bloque cantidad-->
                                          
                                      </div>
                                      <div class="preciounidad cantunid">
                                          <p class="cart" >Precio unit.:</p>
                                          <p class="preciouno" class="cart" >$ <%=producto.price%> </p>
                                      </div>
                                      <div class="preciounidad cantunid">
                                        <p class="cart" >Cantidad:</p>
                                        <p class="preciouno" class="cart" ><%=producto.cantidad%> pares</p>
                                    </div>
                                  </div>
                                  <div class="precio"><!--bloque precio-->
                                    
                                      <p> $ </p></p><p class="subtotal" > <%=producto.subtotalElemento%>  </p>
                                  </div>
                                  
                                  
                              </div>
                              <div class="bloqueInferiorProducto"><!--bloque precio-->
                                  <form method="POST" action="/productCart/delete/<%=producto.id%>?_method=DELETE">
                                    <button type="submit" class="bloqueInferiorProducto">
                                          Eliminar
                                      </button></a> 
                                  </form>
                                  
                                  <a href="/productDetail/<%=producto.id%>">Modificar</a>
                                  <a href="/products/">Ver otros artículos del vendedor</a>
                              </div>
                              
                          </div>
                    </article>
                    
                    <% }) %>

                    



                      <article>
                            <div class="bloqueSuma">
                                <div class="envio"><!--bloque SUBTOTAL SIN ENVIO-->
                                    <div class="envio-leyenda"><p class="cart" ><i class="fa-solid fa-truck"></i>  Costo de envío:</p>
                                    </div>
                                    <div class="envio-precio"><p class="cart" >$500</p>
                                    </div>
                                </div>
                                
                                
                                <div class="total"><!--bloque SUBTOTAL SIN ENVIO-->
                                    <div class="total-leyenda">Total de la compra:    
                                    </div>
                                    <div class="total-precio">
                                        <p class="total-precio">$<%=sumaTotal%>
                                        </p>
                                    </div>
                                </div>
                                <div class="continuarCompra">
                                
                                    <button class="finalizar" type="submit"><p class="cart" >¡Finalizar compra!</p></button>
                                
                                </div>
                            
                            </div>
                            
                        
                        
                    </article> 
                    <% } else { %>

                        <h3> ¡Tu carrito está vacío!</h3>

                    <% } %>


                </div>
            </div>
        </div>  
        

        <!--RECOMENDADOS PARA VOS------------------------------------------------->
        
        <section class="recommended">
        <div class="titularRecomendados">
            <h3 class="cart">Recomendados para vos</h3>
        </div>
        
        <div class="recomendados">

            <% destacados.forEach(producto => { %>
          <article class="art-recomendados">
            <div class="product">
                <div class="product-foto">
                <a href="/productDetail/<%= producto.id %> "><img src="/img/products/<%=producto.image%> " alt=""></a>
                </div>
                <div class="product-detail">
                <p class="cart" ><%=producto.name%> </p>
                <p class="product-price"><%=producto.price%></p>
                </div>
            
            </div>
          </article>
          <% }) %>
         
            </div>
        </section>


        


    </main>
    <%- include ('partials/footer') %> 
<script src="/js/carrito.js"></script>
<script src="/js/precioTotal.js"></script>
</body>
</html>



